<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>commander</title>
		<script src="/static/js/jquery-1.10.2.min.js"></script>
		<style>
			#photo{
				float:right;
				width:100px;
				height:100px;
				border:1px solid black;
			}
		</style>
	</head>
	<body>
		<form method="post">
			<img id="photo">
			<fieldset>
				<legend>motor controls</legend>
				<button type="submit" name="do" value="stop">stop</button>
				<br>
				<button type="submit" name="do" value="backward">backward</button>
				<button type="submit" name="do" value="forward">forward</button>
				<br>
				<button type="submit" name="do" value="left">left</button>
				<button type="submit" name="do" value="right">right</button>
			</fieldset>
			<fieldset>
				<legend>high-level controls</legend>
				<button type="submit" name="do" value="photo">take a photo</button>
			</fieldset>
			<fieldset>
				<legend>sensors</legend>
				<label for="battery">battery</label>
				<input id="battery">
			</fieldset>
		</form>
		<script>
			$(function(){
				(function update(){
					$.post("/battery")
						.done(function(data){
							$("#battery").val(data);
						}).always(function(){
							setTimeout(update,10000);
						});
				})();
			});
			$(function(){
				$("form input[type=submit]").click(function(e){
					e.preventDefault();
					$.post("/"+$(this).val());
				});
			});
		</script>
	</body>
</html>
